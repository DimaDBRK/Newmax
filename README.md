# NewMax

# Description: 
A NodeJS service that retrieves information about the stock availability of each SKU based on sizes at the "Kazan WB" warehouse. The data is parsed from the wildberries.ru website, specifically from a product card, provided as an example - https://www.wildberries.ru/catalog/146972802/detail.aspx

[Description in Russian is here:](task.txt)

## Service Overview

Functions:

- getCardsIDsById: Accepts a main ID as a parameter (in example - 146972802) fetches card information based on a main ID, extracts the linked card IDs, and returns them as a semicolon-separated string to use in function like parameter. If any errors occur during the process, it logs the error and propagates it for additional error handling. It use link for fetch which is generated by ID in function wbUrlById.
- wbUrlById:  function generates a URL for fetching information based on the provided ID. It takes an ID, determines the hosting server based on the vol range, constructs a URL, and returns the URL.
- getStoreIdByName: function is designed to retrieve a store ID based on the provided store name. It makes an asynchronous HTTP GET request to a static JSON file containing store information. Parses the JSON response to obtain an array of store information objects. 
- parseElements: the function is designed to parse and structure data related to articles and their stock quantities in different sizes, with a focus on a specific warehouse. It returns an array of objects representing the parsed information for each article.
- getStockInfoByCardId: the function coordinates the retrieval of card IDs, constructs a URL for detailed card information, fetches the data, obtains the store ID, and parses the stock information for the specified warehouse. The parsed information is then logged to the console, and any encountered errors are logged and propagated for potential handling.


Settings:
const storeName = "Казань WB";
const cardId = 146972802;

Result format:
  [
    {
    art: 36328331,
    stock: {
      XL: 0,
      '2XL': 136,
      '3XL': 224,
      '4XL': 45,
      '6XL': 93,
      '5XL': 18,
      '7XL': 71,
      '8XL': 40
    }
  },
  {
    art: 154611222,
    stock: {
      '60-62': 0,
      '46-48': 34,
      '48-50': 46,
      '50-52': 16,
      '52-54': 0,
      '54-56': 0,
      '56-58': 0,
      '58-60': 0,
      '44-46': 0
    }
  }
]


## Installation
   
1. Clone the repository:

```bash
git clone REPO NAME
cd yourproject

2. Install the dependencies for the Node.js:
cd ..
npm install

Start file:
node index.js


